<custom-nav></custom-nav>
<!--matched-schools.wxml-->
<view class="container">
  <!-- 顶部导航栏 -->
  <view class="header-gradient p-3 pt-20 pb-6 rounded-b-3xl">
    <view class="nav-content">
      <view class="back-btn" bindtap="goBack">
        <view class="back-icon"></view>
        <text class="back-text">返回</text>
      </view>
      <text class="text-lg font-bold text-white ml-3">可匹配院校</text>
    </view>
    
    <view class="mt-3">
      <text class="text-white opacity-80 font-sm mb-1 block">您的模考情况</text>
      <view class="text-xl font-bold text-white">
        <view>模考分数：{{userScore}}分</view>
        <view wx:if="{{targetSchool && targetSchoolScore}}" class="mt-1">
          目标院校：{{targetSchool}} ({{targetSchoolScore}}分)
        </view>
      </view>
    </view>
  </view>
  
  <!-- 内容区域 -->
  <view class="content-area">
    <!-- 标签页切换 -->
    <view class="tabs-container">
      <view class="{{activeTab === 'all' ? 'tab-item active' : 'tab-item'}}" bindtap="switchTab" data-tab="all">全部学校</view>
      <view class="{{activeTab === 'reachable' ? 'tab-item active' : 'tab-item'}}" bindtap="switchTab" data-tab="reachable">符合要求</view>
      <view class="{{activeTab === 'unreachable' ? 'tab-item active' : 'tab-item'}}" bindtap="switchTab" data-tab="unreachable">不符合要求</view>
    </view>
    
    <!-- 调试信息 -->
    <view wx:if="{{filteredSchools.length === 0}}" class="debug-info">
      <view>用户分数: {{userScore}}</view>
      <view>匹配学校总数: {{matchedSchools.length}}</view>
      <view>当前标签: {{activeTab}}</view>
    </view>
    
    <!-- 学校列表卡片 -->
    <view class="policy-details card" wx:if="{{filteredSchools.length > 0}}">
      <view class="card-title">
        <text>{{activeTab === 'all' ? '全部学校' : (activeTab === 'reachable' ? '符合要求的学校' : '不符合要求的学校')}}</text>
        <text class="school-count">共{{filteredSchools.length}}所</text>
      </view>
      <view class="schools-list">
        <view wx:for="{{filteredSchools}}" wx:key="index" class="school-card">
          <view class="school-header">
            <view class="school-name">{{item.schoolName}}</view>
            <view class="school-badge {{item.reachable ? 'primary' : 'secondary'}}">
              {{item.reachable ? '符合要求' : '不符合要求'}}
            </view>
          </view>
          <view class="score-item">
            <view class="score-year">录取分数</view>
            <view class="score-value {{item.reachable ? 'match' : 'unmatch'}}">{{item.score}}分</view>
          </view>
          <view class="score-item">
            <view class="score-year">排名</view>
            <view class="score-value">第{{item.rank}}名</view>
          </view>
          <view class="score-item">
            <view class="score-year">学校类型</view>
            <view class="score-value">{{item.type || '未知'}}</view>
          </view>
          <view class="score-item">
            <view class="score-year">等级</view>
            <view class="score-value">{{item.level || '未知'}}</view>
          </view>
          <view wx:if="{{!item.reachable && item.difference > 0}}" class="score-item">
            <view class="score-year">分数差距</view>
            <view class="score-value unmatch">还差{{item.difference}}分</view>
          </view>
          <view class="address-row">
            <view class="address-label">地址</view>
            <view class="address-value">{{item.address || '未知'}}</view>
          </view>
        </view>
      </view>
    </view>
    
    <!-- 无匹配学校提示 -->
    <view wx:if="{{filteredSchools.length === 0}}" class="empty-content">
      <view class="empty-text">暂无符合条件的学校</view>
    </view>
  </view>
</view> 
