// 隐私政策页面逻辑
Page({
  data: {
    // 隐私政策内容
    privacyContent: `
# 自动续费协议

本协议是《会员服务协议》的补充协议，是其不可分割的组成部分。在使用昆明中考助手会员自动续费服务前，请仔细阅读本协议，确保充分理解协议中各条款。

## 一、自动续费服务说明

1. 自动续费服务是指您在购买会员服务时勾选了自动续费选项，授权平台在当前会员服务即将到期时，自动从您的支付账户中扣除下一个服务周期的会员费用，为您延长相应的会员服务期限。

2. 自动续费服务将按照您购买会员时选择的周期进行扣费和续期，直至您主动取消自动续费功能。

## 二、扣款规则

1. 扣款时间：系统将在您当前会员服务即将到期时（一般为到期前24小时）进行自动扣款续费。

2. 扣款金额：以您开通自动续费的会员套餐价格为准。若续费时该套餐价格发生变动，将按照当时的最新价格进行扣款。

3. 扣款账户：系统将使用您最近一次会员购买时使用的支付账户进行扣款。

4. 扣款通知：系统将在成功扣款后通过微信消息或其他方式向您发送通知。

## 三、自动续费服务的解除

1. 您可以随时取消自动续费功能。取消后，已支付的会员服务将继续有效至当前服务期结束，不再自动续费。

2. 取消方式：您可以通过"我的-会员开通-取消续费"功能进行操作。

3. 取消时间：为保证服务不中断，建议您至少在当前会员服务到期前24小时取消自动续费功能。

## 四、其他约定

1. 扣款失败处理：若因余额不足、支付账户异常等原因导致扣款失败，系统将在会员到期后停止提供会员服务，并不再自动尝试扣款。此时您需要手动重新购买会员。

2. 价格调整：平台可能根据运营需要调整会员价格。价格调整前，平台将通过公告或其他方式通知您。如您不同意调整后的价格，可在价格调整生效前取消自动续费功能。

3. 发票开具：如需开具发票，可联系客服处理。

## 五、特别提示

1. 开通自动续费功能前，请确保已阅读并同意本协议。

2. 请确保您的支付账户状态正常，余额充足，以避免因扣款失败导致会员服务中断。

3. 如有任何疑问，可通过客服渠道联系我们。
    `
  },

  onLoad: function() {
    // 格式化隐私政策内容，处理markdown语法
    this.formatPrivacyContent();
  },

  // 处理隐私政策文本，将Markdown格式转为小程序可显示的格式
  formatPrivacyContent: function() {
    let content = this.data.privacyContent;
    
    // 替换标题
    content = content.replace(/# (.*?)\n/g, '<view class="privacy-title">$1</view>\n');
    content = content.replace(/## (.*?)\n/g, '<view class="privacy-subtitle">$1</view>\n');
    
    // 替换列表
    content = content.replace(/(\d+)\. (.*?)\n/g, '<view class="privacy-list-item">$1. $2</view>\n');
    
    // 替换段落
    content = content.replace(/([^#\d-])(.*?)\n/g, function(match, p1, p2) {
      if (p2.trim() !== '') {
        return p1 + '<view class="privacy-paragraph">' + p2 + '</view>\n';
      }
      return match;
    });
    
    this.setData({
      privacyContent: content
    });
  }
}) 